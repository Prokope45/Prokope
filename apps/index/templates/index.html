{% extends 'base.html' %}
{% load static %}

{% block extra_head_links %}
    <link href="{% static 'css/index.css' %}" rel="stylesheet" />
{% endblock %}

{% block index %}
    <head>
      <title>Portfolio</title>
      <!-- <style>
          [data-theme="dark"] #profile {
              /* FIXME: Filter causes delay during theme switch */
              filter: brightness(.8) contrast(1.2);
              transition: all 0.3s ease;
          }
      </style> -->
    </head>

    {% include 'navbar.html' %}
    <div id="content">
      {% if index_data.hero_banner %}
        <header class="page-header header container-fluid mb-4 p-0"
          style="background-image: url({{ index_data.hero_banner.url }});"
        >
      {% else %}
      <header class="page-header header container-fluid mb-4 p-0">
      {% endif %}
        <div class="overlay"></div>
        <div id="greeting" class="container col-10 px-0">
          {% include 'typewriter.html' %}
        </div>
      </header>
      </header> <!-- two closing headers for if-else -->

      <div class="container">
        <section class="lazy-section mt-8" data-lazy="section">
          <h3 class="text-center">Interested in My Work?</h3>
          <div id="links">
            <div class="row justify-content-center text-center">
              <a class="github icon icon-fill"
                href="https://github.com/Prokope45"
                target="_blank"
                rel="noopener noreferrer"
                role="button"
              >
                <i class="fa fa-github"></i>
              </a>
  
              <a class="linkedin icon icon-fill"
                href="https://linkedin.com/in/jared-paubel"
                target="_blank"
                rel="noopener noreferrer"
                role="button"
              >
                <i class="fa fa-linkedin"></i>
              </a>
  
              <a class="medium icon icon-fill"
                href="https://medium.com/@prokope"
                target="_blank"
                rel="noopener noreferrer"
                role="button"
              >
                <i class="fa fa-medium"></i>
              </a>
            </div>
          </div>
        </section>

        <section class="features index-section">
          <div class="row lazy-section" data-lazy="section">
            <div class="col">
              <h3 id="{{ index_data.about_prokope_title }}" class="feature-title">{{ index_data.about_prokope_title }}</h3>
              <p>{{ index_data.about_prokope_description }}</p>
            </div>
          </div>
          <div class="row align-items-start my-4 lazy-section" data-lazy="section">
            <h3 id="{{ index_data.about_me_title }}" class="col-12 feature-title">{{ index_data.about_me_title }}</h3>
            <div class="col-12 col-lg-8 order-2 order-lg-1">
              <p>{{ index_data.about_me_description }}</p>
            </div>
            <div class="col-12 col-lg-4 order-1 text-center order-lg-2 mb-2 p-0">
              {% if index_data.hero_image %}
                <!-- FIXME: Filter causes delay during theme switch -->
                <img id="profile" class="img-fluid my-auto" src="{{ index_data.hero_image.url }}" />
              {% else %}
              {% endif %}
            </div>
          </div>
        </section>

        {% if not posts|length == 0 %}
          <section class="index-section lazy-section" data-lazy="section">
            <h1 class="row justify-content-center">Recent Articles</h1>
            <div class="row justify-content-center">
              {% for post in posts %}
                <div id="index-blog" class="card col-md-5 mb-4 mx-1">
                  <div class="card-body d-flex flex-column" onclick="location.href='/blog/{{ post.slug }}';">
                    <h2 class="card-title">
                      {{ post.title }} <i class="fa fa-lightbulb-o my-auto ml-2"></i>
                    </h2>
                    <div class="card-text">
                      {% if post.updated_on > post.created_on %}
                        <i class="fa fa-pencil text-muted mr-2"></i>{{ post.updated_on }}
                      {% else %}
                        <i class="fa fa-clock-o fa-lg text-muted mr-2"></i>{{ post.created_on }}
                      {% endif %}

                      <p>{{ post.content | safe | slice:":400" }}</p>
                    </div>
                    <div class="read-more mt-auto">Read More...</div>
                  </div>
                </div>
              {% endfor %}
            </div>
          </section>
        {% endif %}

        {% include 'previews/gallery.html' with gallery=gallery %}
      </div>
    </div>
    {% include 'footer.html' %}
{% endblock index %}